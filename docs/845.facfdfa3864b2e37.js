"use strict";(self.webpackChunkASM=self.webpackChunkASM||[]).push([[845],{2845:(B,h,c)=>{c.r(h),c.d(h,{CategoriesModule:()=>q});var g=c(9015),s=c(2823),f=c(2617),p=c(4004),C=c(1005),t=c(4650),b=c(529);let E=(()=>{class e{constructor(n){this.http=n}load(n,o){const r=(n-1)%7*o;return this.http.get("assets/data/news.json").pipe((0,p.U)(i=>i.splice(r,o)),(0,C.g)(1500))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(b.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var l=c(923);let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ngx-components"]],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"router-outlet")},dependencies:[l.lC],encapsulation:2}),e})();var v=c(5226),T=c.n(v),m=c(4641),Z=c(5595),P=c(5515),u=c(6895),O=c(5547);const y=["formElement"];function A(e,a){1&e&&(t.TgZ(0,"span",39),t._uU(1,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),t.qZA())}function x(e,a){1&e&&(t.TgZ(0,"span",40),t._uU(1,"\u0110\xe3 ng\u1eebng ho\u1ea1t \u0111\u1ed9ng"),t.qZA())}function S(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,i=t.oxw();return t.KtG(i.editCate(r.id))}),t._UZ(1,"i",42),t.qZA()}}function k(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,i=t.oxw();return t.KtG(i.deleteCategories(r.id))}),t._UZ(1,"i",44),t.qZA()}}function N(e,a){if(1&e&&(t.TgZ(0,"tr")(1,"td",32),t._uU(2),t.qZA(),t.TgZ(3,"td",32),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t.YNc(6,A,2,0,"span",34),t.YNc(7,x,2,0,"span",35),t.qZA(),t.TgZ(8,"td",33)(9,"div",36),t.YNc(10,S,2,0,"button",37),t.YNc(11,k,2,0,"button",38),t.qZA()()()),2&e){const n=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Q6J("ngIf",0===n.status),t.xp6(1),t.Q6J("ngIf",1===n.status),t.xp6(3),t.Q6J("ngIf",!n.isLocker),t.xp6(1),t.Q6J("ngIf",!n.isLocker)}}function L(e,a){1&e&&(t.TgZ(0,"small"),t._uU(1," Vui l\xf2ng nh\u1eadp t\xean danh m\u1ee5c. "),t.qZA())}function U(e,a){if(1&e&&(t.TgZ(0,"div",27),t.YNc(1,L,2,0,"small",45),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.form.get("name").hasError("required"))}}const w=[{path:"",component:M,children:[{path:"list",component:(()=>{class e{constructor(n,o,r,i,d,Q){this.toastrService=n,this.CategorieService=o,this.themeService=r,this.spinner=i,this.route=d,this.router=Q,this.newCate={name:"",status:""},this.isAddingNewCate=!0,this.isEditing=!1,this.apiUrl=m.C+m.Q.categories,this.currentPage=1,this.searchQuery="",this.Categories=[],this.themes=[{value:"default",name:"Light"},{value:"dark",name:"Dark"}],this.currentTheme="default",this.themeService.onThemeChange().subscribe(I=>{this.currentTheme=I.name})}ngOnInit(){this.route.queryParams.subscribe(n=>{this.loadCategories(n.page||1)}),this.form=new g.cw({name:new g.NI("",g.kI.required),status:new g.NI("")})}loadCategories(n){this.spinner.show(),this.CategorieService.getAllCategories(n,this.searchQuery).subscribe(o=>{this.spinner.hide(),this.Categories=o.categories.map(i=>Object.assign(Object.assign({},i),{isLocker:"Ch\u01b0a Ph\xe2n Lo\u1ea1i"===i.name})),this.currentPage=o.currentPage,this.totalPages=o.totalPages;const r={page:n};this.searchQuery&&""!==this.searchQuery.trim()&&(r.search=this.searchQuery),this.router.navigate([],{queryParams:r,replaceUrl:!0})},o=>{this.spinner.hide(),console.error("Error loading categories:",o)})}onSearch(){this.loadCategories(this.currentPage)}addCategories(){if(!this.form.valid)return void this.toastrService.danger("Vui l\xf2ng nh\u1eadp \u0111\u1ee7 d\u1eef li\u1ec7u v\xe0 ki\u1ec3m tra l\u1ea1i c\xe1c tr\u01b0\u1eddng!","Error");let n;const o=this.form.get("name").value;let r=this.form.get("status").value;r||(r=0),n={name:o,status:r},this.spinner.show(),!0!==this.isEditing||this.isAddingNewCate?this.CategorieService.addCategories(n).subscribe(()=>{this.toastrService.success("Th\xeam m\u1edbi th\xe0nh c\xf4ng!","Success"),this.spinner.hide(),this.loadCategories(1)},i=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi th\xeam !","Error"),console.error("Error adding Categories:",i),this.spinner.hide()}):this.CategorieService.updateCategories(this.newCate.id,n).subscribe(()=>{this.toastrService.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!","Success"),this.isEditing=!1,this.spinner.hide(),this.loadCategories(this.currentPage)},d=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi c\u1eadp nh\u1eadt!","Error"),console.error("Error updating Categories:",d),this.spinner.hide()}),this.form.reset()}editCate(n){if(this.isEditing)return;const o=this.Categories.findIndex(r=>r.id===n);-1!==o&&(this.newCate=Object.assign({},this.Categories[o]),this.form.patchValue({name:this.newCate.name,status:this.newCate.status}),this.isAddingNewCate=!1,this.isEditing=!0,this.toastrService.info("S\u1eb5n s\xe0ng c\u1eadp nh\u1eadt!","Th\xf4ng tin")),this.scrollFormIntoView()}deleteCategories(n){T().fire({title:"X\xe1c nh\u1eadn x\xf3a",text:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a danh m\u1ee5c n\xe0y?",icon:"warning",showCancelButton:!0,confirmButtonText:"\u0110\u1ed3ng \xfd",cancelButtonText:"H\u1ee7y b\u1ecf"}).then(o=>{o.isConfirmed&&this.CategorieService.deleteCategories(n).subscribe(()=>{const r=this.Categories.findIndex(i=>i.id===n);-1!==r&&(this.Categories.splice(r,1),this.toastrService.success("X\xf3a th\xe0nh c\xf4ng!","Success"))},r=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi x\xf3a","Error"),console.error("Error deleting Categories:",r)})})}Reset(){this.isEditing=!1,this.isAddingNewCate=!1,this.form.reset(),this.toastrService.success("D\u1eef li\u1ec7u tr\xean form \u0111\xe3 \u0111\u01b0\u1ee3c reset!","Th\xe0nh c\xf4ng")}scrollFormIntoView(){this.formElement&&this.formElement.nativeElement.scrollIntoView({behavior:"smooth",block:"start"})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(s.quB),t.Y36(Z.H),t.Y36(s.WMF),t.Y36(P.V),t.Y36(l.gz),t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-categories"]],viewQuery:function(n,o){if(1&n&&t.Gf(y,5),2&n){let r;t.iGM(r=t.CRH())&&(o.formElement=r.first)}},decls:59,vars:12,consts:[[3,"ngClass"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"d-flex",3,"ngSubmit"],["type","search","placeholder","T\xecm ki\u1ebfm","name","searchQuery","aria-label","Search",1,"form-control","me-2",3,"ngModel","ngModelChange"],["type","submit","nbButton","","status","primary"],[1,"fa-solid","fa-magnifying-glass"],[1,"container"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[3,"apiUrl","current_page","last_page","dataList"],[1,"my-lg-2",3,"ngClass"],[1,"card-title"],[3,"formGroup","ngSubmit"],["cateForm","ngForm","formElement",""],[1,"row"],[1,"col-md-6"],[1,"form-group","my-3"],["for","categoriesName",1,"my-1"],[1,"spot"],["type","text","id","categoriesName","formControlName","name",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["id","status","formControlName","status",1,"form-control",3,"ngModel","ngModelChange"],["value",""],["value","0"],["value","1"],[1,"text-danger"],["nbButton","","type","submit","status","success","nbTooltip","L\u01b0u d\u1eef li\u1ec7u",1,"float-end",3,"disabled"],[1,"fa-solid","fa-check"],["nbButton","","status","warning","type","button","nbTooltip","Reset d\u1eef li\u1ec7u",1,"float-end","mx-2",3,"click"],[1,"fa-solid","fa-rotate-left"],[1,"align-middle"],[1,"align-middle","text-center"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn-group","d-flex","justify-content-center"],["nbButton","","status","primary","type","button","class","btn-sm mx-1 btn-equal","nbTooltip","S\u1eeda d\u1eef li\u1ec7u",3,"click",4,"ngIf"],["nbButton","","status","danger","type","button","class","btn-sm mx-1 btn-equal","nbTooltip","X\xf3a d\u1eef li\u1ec7u",3,"click",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["nbButton","","status","primary","type","button","nbTooltip","S\u1eeda d\u1eef li\u1ec7u",1,"btn-sm","mx-1","btn-equal",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nbButton","","status","danger","type","button","nbTooltip","X\xf3a d\u1eef li\u1ec7u",1,"btn-sm","mx-1","btn-equal",3,"click"],[1,"fa-solid","fa-trash"],[4,"ngIf"]],template:function(n,o){1&n&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header",1)(2,"h5",2),t._uU(3,"Danh s\xe1ch danh m\u1ee5c"),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return o.onSearch()}),t.TgZ(5,"input",4),t.NdJ("ngModelChange",function(i){return o.searchQuery=i}),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),t._uU(15,"#"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"T\xean danh m\u1ee5c"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Thao t\xe1c"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,N,12,6,"tr",10),t.qZA()(),t.TgZ(24,"ngx-paginator",11),t.NdJ("dataList",function(i){return o.loadCategories(i)}),t.qZA()()()()(),t.TgZ(25,"nb-card",12)(26,"nb-card-header")(27,"h5",13),t._uU(28,"Th\xeam / C\u1eadp nh\u1eadt danh m\u1ee5c"),t.qZA()(),t.TgZ(29,"nb-card-body")(30,"form",14,15),t.NdJ("ngSubmit",function(){return o.addCategories()}),t.TgZ(33,"div",16)(34,"div",17)(35,"div",18)(36,"label",19),t._uU(37,"T\xean danh m\u1ee5c"),t.TgZ(38,"span",20),t._uU(39,"*"),t.qZA(),t._uU(40,":"),t.qZA(),t.TgZ(41,"input",21),t.NdJ("ngModelChange",function(i){return o.newCate.name=i}),t.qZA(),t.YNc(42,U,2,1,"div",22),t.qZA()(),t.TgZ(43,"div",17)(44,"div",18)(45,"label",19),t._uU(46,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(47,"select",23),t.NdJ("ngModelChange",function(i){return o.newCate.status=i}),t.TgZ(48,"option",24),t._uU(49,"-- Ch\u1ecdn tr\u1ea1ng th\xe1i --"),t.qZA(),t.TgZ(50,"option",25),t._uU(51,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),t.qZA(),t.TgZ(52,"option",26),t._uU(53,"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng"),t.qZA()(),t._UZ(54,"div",27),t.qZA()()(),t.TgZ(55,"button",28),t._UZ(56,"i",29),t.qZA(),t.TgZ(57,"button",30),t.NdJ("click",function(){return o.Reset()}),t._UZ(58,"i",31),t.qZA()()()()),2&n&&(t.Q6J("ngClass",o.currentTheme),t.xp6(5),t.Q6J("ngModel",o.searchQuery),t.xp6(18),t.Q6J("ngForOf",o.Categories),t.xp6(1),t.Q6J("apiUrl",o.apiUrl)("current_page",o.currentPage)("last_page",o.totalPages),t.xp6(1),t.Q6J("ngClass",o.currentTheme),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("ngModel",o.newCate.name),t.xp6(1),t.Q6J("ngIf",o.form.get("name").invalid&&o.form.get("name").touched),t.xp6(5),t.Q6J("ngModel",o.newCate.status),t.xp6(8),t.Q6J("disabled",!o.form.valid))},dependencies:[g._Y,g.YN,g.Kr,g.Fj,g.EJ,g.JJ,g.JL,g.On,g.F,g.sg,g.u,u.mk,u.sg,u.O5,s.Asz,s.yKW,s.ndF,s.DPz,s.jNv,O.J],styles:[".spot[_ngcontent-%COMP%]{color:red}.badge-success[_ngcontent-%COMP%]{display:inline-block;padding:.5em .75em;font-size:.875em;font-weight:700;color:#fff;background-color:#28a745;border-radius:.2rem}.badge-danger[_ngcontent-%COMP%]{display:inline-block;padding:.5em .75em;font-size:.875em;font-weight:700;color:#fff;background-color:#dc3545;border-radius:.2rem}.light[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{background-color:#fff;color:#000}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{background-color:transparent}.light[_ngcontent-%COMP%]   .table-bordered[_ngcontent-%COMP%]{border:1px solid #dee2e6}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#000;border-color:#dee2e6}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-color:#dee2e6}.light[_ngcontent-%COMP%]   .badge-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.light[_ngcontent-%COMP%]   .badge-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.light[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#000;border-color:#dee2e6}.dark[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{background-color:#222b45;color:#fff}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{background-color:transparent}.dark[_ngcontent-%COMP%]   .table-bordered[_ngcontent-%COMP%]{border:1px solid #3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#2e3a59;color:#fff;border-color:#3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#222b45;color:#fff;border-color:#3b426b}.dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#192038;color:#fff;border-color:#111426}.dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#8590a8}"]}),e})(),data:{breadcrumb:"Danh S\xe1ch"}}]}];let F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(w),l.Bz]}),e})();var J=c(5053);let q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[E],imports:[g.u5,g.UX,f.O,s.EoG,s._WB,s.obu,s.zyh,s.BW0,s.T2N,s.COg,s.PYG,s.MfT,s.nKr,s.SDF,s.oGl,s.AE1,F,s.rgH,J.U]}),e})()}}]);