"use strict";(self.webpackChunkASM=self.webpackChunkASM||[]).push([[656],{1656:(K,g,l)=>{l.r(g),l.d(g,{CustomersModule:()=>R});var i=l(9015),a=l(2823),f=l(2617),p=l(4004),C=l(1005),t=l(4650),_=l(529);let Z=(()=>{class e{constructor(n){this.http=n}load(n,o){const s=(n-1)%7*o;return this.http.get("assets/data/news.json").pipe((0,p.U)(u=>u.splice(s,o)),(0,C.g)(1500))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(_.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var c=l(923);let b=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ngx-components"]],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"router-outlet")},dependencies:[c.lC],encapsulation:2}),e})();var T=l(5226),v=l.n(T),h=l(4641),A=l(8315),M=l(5515),d=l(6895),P=l(5547);const q=["formElement"];function k(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",34),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.qZA(),t.TgZ(11,"td",34),t._uU(12),t.qZA(),t.TgZ(13,"td",35)(14,"div",36)(15,"button",37),t.NdJ("click",function(){const u=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.editCustomer(u.id))}),t._UZ(16,"i",38),t.qZA(),t.TgZ(17,"button",39),t.NdJ("click",function(){const u=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.deleteCustomer(u.id))}),t._UZ(18,"i",40),t.qZA()()()()}if(2&e){const n=r.$implicit,o=r.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.username),t.xp6(2),t.Oqu(n.email),t.xp6(2),t.Oqu(n.tel),t.xp6(2),t.Oqu(n.address)}}function x(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean kh\xe1ch h\xe0ng."),t.qZA())}function O(e,r){if(1&e&&(t.TgZ(0,"div",41),t.YNc(1,x,2,0,"small",42),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.form.get("name").hasError("required"))}}function y(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"Vui l\xf2ng nh\u1eadp t\xean t\xe0i kho\u1ea3n kh\xe1ch h\xe0ng."),t.qZA())}function U(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"T\xean t\xe0i kho\u1ea3n kh\xf4ng \u0111\u01b0\u1ee3c d\u01b0\u1edbi 6 k\xed t\u1ef1."),t.qZA())}function N(e,r){if(1&e&&(t.TgZ(0,"div",41),t.YNc(1,y,2,0,"small",42),t.YNc(2,U,2,0,"small",42),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.form.get("username").hasError("required")),t.xp6(1),t.Q6J("ngIf",n.form.get("username").hasError("minLength"))}}function L(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"Vui l\xf2ng nh\u1eadp email kh\xe1ch h\xe0ng."),t.qZA())}function J(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"Email kh\xf4ng h\u1ee3p l\u1ec7."),t.qZA())}function S(e,r){if(1&e&&(t.TgZ(0,"div",41),t.YNc(1,L,2,0,"small",42),t.YNc(2,J,2,0,"small",42),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.form.get("email").hasError("required")),t.xp6(1),t.Q6J("ngIf",n.form.get("email").hasError("email"))}}function F(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xe1ch h\xe0ng. "),t.qZA())}function w(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ee9a s\u1ed1. "),t.qZA())}function I(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i c\xf3 \xedt nh\u1ea5t 10 k\xfd t\u1ef1. "),t.qZA())}function Q(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c qu\xe1 11 k\xfd t\u1ef1. "),t.qZA())}function D(e,r){if(1&e&&(t.TgZ(0,"div",41),t.YNc(1,F,2,0,"small",42),t.YNc(2,w,2,0,"small",42),t.YNc(3,I,2,0,"small",42),t.YNc(4,Q,2,0,"small",42),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.form.get("tel").hasError("required")),t.xp6(1),t.Q6J("ngIf",n.form.get("tel").hasError("numeric")&&n.form.get("tel").touched),t.xp6(1),t.Q6J("ngIf",n.form.get("tel").hasError("minlength")&&n.form.get("tel").touched),t.xp6(1),t.Q6J("ngIf",n.form.get("tel").hasError("maxlength")&&n.form.get("tel").touched)}}function B(e,r){1&e&&(t.TgZ(0,"small"),t._uU(1,"Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9 kh\xe1ch h\xe0ng."),t.qZA())}function Y(e,r){if(1&e&&(t.TgZ(0,"div",41),t.YNc(1,B,2,0,"small",42),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.form.get("address").hasError("required"))}}const V=[{path:"",component:b,children:[{path:"list",component:(()=>{class e{constructor(n,o,s,u,m,z){this.toastrService=n,this.customerService=o,this.themeService=s,this.spinner=u,this.router=m,this.route=z,this.newCustomer={name:"",username:"",tel:"",email:"",address:""},this.isAddingNewCustomer=!0,this.isEditing=!1,this.customers=[],this.apiUrl=h.C+h.Q.customers,this.currentPage=1,this.searchQuery="",this.themes=[{value:"default",name:"Light"},{value:"dark",name:"Dark"}],this.currentTheme="default",this.themeService.onThemeChange().subscribe(H=>{this.currentTheme=H.name})}ngOnInit(){this.route.queryParams.subscribe(n=>{this.loadCustomers(n.page||1)}),this.form=new i.cw({name:new i.NI("",i.kI.required),username:new i.NI("",[i.kI.required,i.kI.minLength(6)]),tel:new i.NI("",[i.kI.required,i.kI.minLength(10),i.kI.maxLength(11),this.numericValidator]),email:new i.NI("",[i.kI.required,i.kI.email]),address:new i.NI("",i.kI.required)})}numericValidator(n){const o=n.value;return o&&!/^[0-9]*$/.test(o)?{numeric:!0}:null}loadCustomers(n){this.spinner.show(),this.customerService.getAllCustomers(n,this.searchQuery).subscribe(o=>{this.spinner.hide(),this.customers=o.customers,this.currentPage=o.currentPage,this.totalPages=o.totalPages;const s={page:n};this.searchQuery&&""!==this.searchQuery.trim()&&(s.search=this.searchQuery),this.router.navigate([],{queryParams:s,replaceUrl:!0})})}onSearch(){this.loadCustomers(this.currentPage)}addCustomer(){if(!this.form.valid)return void this.toastrService.danger("Vui l\xf2ng nh\u1eadp \u0111\u1ee7 d\u1eef li\u1ec7u v\xe0 ki\u1ec3m tra l\u1ea1i c\xe1c tr\u01b0\u1eddng!","Error");const n={name:this.form.get("name").value,username:this.form.get("username").value,email:this.form.get("email").value,tel:this.form.get("tel").value,address:this.form.get("address").value};this.isAddingNewCustomer?this.customerService.addCustomer(n).subscribe(()=>{this.toastrService.success("Th\xeam m\u1edbi th\xe0nh c\xf4ng!","Success"),this.spinner.hide(),this.loadCustomers(1)},o=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi th\xeam kh\xe1ch h\xe0ng!","Error"),this.spinner.hide()}):this.customerService.updateCustomer(this.newCustomer.id,n).subscribe(()=>{this.toastrService.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!","Success"),this.isEditing=!1,this.spinner.hide(),this.loadCustomers(this.currentPage)},o=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi c\u1eadp nh\u1eadt kh\xe1ch h\xe0ng!","Error"),this.spinner.hide()}),this.form.reset()}editCustomer(n){if(this.isEditing)return;const o=this.customers.findIndex(s=>s.id===n);-1!==o&&(this.newCustomer=Object.assign({},this.customers[o]),this.form.patchValue(this.newCustomer),this.isAddingNewCustomer=!1,this.isEditing=!0),this.scrollFormIntoView()}deleteCustomer(n){v().fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?",icon:"warning",showCancelButton:!0,confirmButtonText:"\u0110\u1ed3ng \xfd",cancelButtonText:"H\u1ee7y b\u1ecf"}).then(o=>{o.isConfirmed&&this.customerService.deleteCustomer(n).subscribe(()=>{const s=this.customers.findIndex(u=>u.id===n);-1!==s&&(this.customers.splice(s,1),this.loadCustomers(this.currentPage),this.toastrService.success("X\xf3a th\xe0nh c\xf4ng!","Success"))},s=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi x\xf3a kh\xe1ch h\xe0ng!","Error")})})}Reset(){var n;this.isEditing=!1,this.isAddingNewCustomer=!0,this.form.reset(),null===(n=this.form.get("customer_id"))||void 0===n||n.enable(),this.toastrService.success("D\u1eef li\u1ec7u tr\xean form \u0111\xe3 \u0111\u01b0\u1ee3c reset!","Th\xe0nh c\xf4ng")}scrollFormIntoView(){this.formElement&&this.formElement.nativeElement.scrollIntoView({behavior:"smooth",block:"start"})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.quB),t.Y36(A.v),t.Y36(a.WMF),t.Y36(M.V),t.Y36(c.F0),t.Y36(c.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],viewQuery:function(n,o){if(1&n&&t.Gf(q,5),2&n){let s;t.iGM(s=t.CRH())&&(o.formElement=s.first)}},decls:89,vars:19,consts:[[3,"ngClass"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"d-flex",3,"ngSubmit"],["type","search","placeholder","T\xecm ki\u1ebfm","name","searchQuery","aria-label","Search",1,"form-control","me-2",3,"ngModel","ngModelChange"],["type","submit","nbButton","","status","primary"],[1,"fa-solid","fa-magnifying-glass"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[3,"apiUrl","current_page","last_page","dataList"],[1,"mt-3",3,"ngClass"],[1,"card-title"],[3,"formGroup","ngSubmit"],["customerForm","ngForm","formElement",""],[1,"row"],[1,"col-md-6"],[1,"form-group","my-3"],["for","customerName",1,"my-1"],[1,"spot"],["type","text","id","customerName","formControlName","name",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["for","customerUsername",1,"my-1"],["type","text","id","customerUsername","formControlName","username",1,"form-control",3,"ngModel","ngModelChange"],["for","customerEmail",1,"my-1"],["type","email","id","customerEmail","formControlName","email",1,"form-control",3,"ngModel","ngModelChange"],["for","customerTel",1,"my-1"],["type","text","id","customerTel","formControlName","tel",1,"form-control",3,"ngModel","ngModelChange"],["for","customerAddress",1,"my-1"],["type","text","id","customerAddress","formControlName","address",1,"form-control",3,"ngModel","ngModelChange"],["nbButton","","type","submit","status","success","nbTooltip","L\u01b0u d\u1eef li\u1ec7u",1,"float-end",3,"disabled"],[1,"fa-solid","fa-check"],["nbButton","","status","warning","type","button","nbTooltip","Reset d\u1eef li\u1ec7u",1,"float-end","mx-2",3,"click"],[1,"fas","fa-rotate-left"],[1,"align-middle"],[1,"align-middle","text-center"],[1,"btn-group"],["nbButton","","status","primary","type","button","nbTooltip","S\u1eeda d\u1eef li\u1ec7u",1,"btn-sm","mr-2","mx-1",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nbButton","","status","danger","type","button","nbTooltip","X\xf3a d\u1eef li\u1ec7u",1,"btn-sm",3,"click"],[1,"fa-solid","fa-trash"],[1,"text-danger"],[4,"ngIf"]],template:function(n,o){1&n&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header",1)(2,"h5",2),t._uU(3,"Danh s\xe1ch kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return o.onSearch()}),t.TgZ(5,"input",4),t.NdJ("ngModelChange",function(u){return o.searchQuery=u}),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"div",7)(10,"table",8)(11,"thead")(12,"tr")(13,"th"),t._uU(14,"#"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"T\xean Kh\xe1ch h\xe0ng"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"T\xean \u0111\u0103ng nh\u1eadp"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Email"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"S\u0110T"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"\u0110\u1ecba ch\u1ec9"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Thao t\xe1c"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,k,19,6,"tr",9),t.qZA()(),t.TgZ(29,"ngx-paginator",10),t.NdJ("dataList",function(u){return o.loadCustomers(u)}),t.qZA()()()(),t.TgZ(30,"nb-card",11)(31,"nb-card-header")(32,"h5",12),t._uU(33,"Th\xeam / C\u1eadp nh\u1eadt kh\xe1ch h\xe0ng"),t.qZA()(),t.TgZ(34,"nb-card-body")(35,"form",13,14),t.NdJ("ngSubmit",function(){return o.addCustomer()}),t.TgZ(38,"div",15)(39,"div",16)(40,"div",17)(41,"label",18),t._uU(42,"T\xean kh\xe1ch h\xe0ng"),t.TgZ(43,"span",19),t._uU(44,"*"),t.qZA(),t._uU(45,":"),t.qZA(),t.TgZ(46,"input",20),t.NdJ("ngModelChange",function(u){return o.newCustomer.name=u}),t.qZA(),t.YNc(47,O,2,1,"div",21),t.qZA()(),t.TgZ(48,"div",16)(49,"div",17)(50,"label",22),t._uU(51,"T\xean t\xe0i kho\u1ea3n kh\xe1ch h\xe0ng"),t.TgZ(52,"span",19),t._uU(53,"*"),t.qZA(),t._uU(54,":"),t.qZA(),t.TgZ(55,"input",23),t.NdJ("ngModelChange",function(u){return o.newCustomer.username=u}),t.qZA(),t.YNc(56,N,3,2,"div",21),t.qZA()()(),t.TgZ(57,"div",15)(58,"div",16)(59,"div",17)(60,"label",24),t._uU(61,"Email kh\xe1ch h\xe0ng"),t.TgZ(62,"span",19),t._uU(63,"*"),t.qZA(),t._uU(64,":"),t.qZA(),t.TgZ(65,"input",25),t.NdJ("ngModelChange",function(u){return o.newCustomer.email=u}),t.qZA(),t.YNc(66,S,3,2,"div",21),t.qZA()(),t.TgZ(67,"div",16)(68,"div",17)(69,"label",26),t._uU(70,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xe1ch h\xe0ng"),t.TgZ(71,"span",19),t._uU(72,"*"),t.qZA(),t._uU(73,":"),t.qZA(),t.TgZ(74,"input",27),t.NdJ("ngModelChange",function(u){return o.newCustomer.tel=u}),t.qZA(),t.YNc(75,D,5,4,"div",21),t.qZA()()(),t.TgZ(76,"div",15)(77,"div",17)(78,"label",28),t._uU(79,"\u0110\u1ecba ch\u1ec9 kh\xe1ch h\xe0ng"),t.TgZ(80,"span",19),t._uU(81,"*"),t.qZA(),t._uU(82,":"),t.qZA(),t.TgZ(83,"input",29),t.NdJ("ngModelChange",function(u){return o.newCustomer.address=u}),t.qZA(),t.YNc(84,Y,2,1,"div",21),t.qZA()(),t.TgZ(85,"button",30),t._UZ(86,"i",31),t.qZA(),t.TgZ(87,"button",32),t.NdJ("click",function(){return o.Reset()}),t._UZ(88,"i",33),t.qZA()()()()),2&n&&(t.Q6J("ngClass",o.currentTheme),t.xp6(5),t.Q6J("ngModel",o.searchQuery),t.xp6(23),t.Q6J("ngForOf",o.customers),t.xp6(1),t.Q6J("apiUrl",o.apiUrl)("current_page",o.currentPage)("last_page",o.totalPages),t.xp6(1),t.Q6J("ngClass",o.currentTheme),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("ngModel",o.newCustomer.name),t.xp6(1),t.Q6J("ngIf",o.form.get("name").invalid&&o.form.get("name").touched),t.xp6(8),t.Q6J("ngModel",o.newCustomer.username),t.xp6(1),t.Q6J("ngIf",o.form.get("username").invalid&&o.form.get("username").touched),t.xp6(9),t.Q6J("ngModel",o.newCustomer.email),t.xp6(1),t.Q6J("ngIf",o.form.get("email").invalid&&o.form.get("email").touched),t.xp6(8),t.Q6J("ngModel",o.newCustomer.tel),t.xp6(1),t.Q6J("ngIf",o.form.get("tel").invalid&&o.form.get("tel").touched),t.xp6(8),t.Q6J("ngModel",o.newCustomer.address),t.xp6(1),t.Q6J("ngIf",o.form.get("address").invalid&&o.form.get("address").touched),t.xp6(1),t.Q6J("disabled",!o.form.valid))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.On,i.F,i.sg,i.u,d.mk,d.sg,d.O5,a.Asz,a.yKW,a.ndF,a.DPz,a.jNv,P.J],styles:[".spot[_ngcontent-%COMP%]{color:red}.light[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{background-color:#fff;color:#000}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{background-color:transparent}.light[_ngcontent-%COMP%]   .table-bordered[_ngcontent-%COMP%]{border:1px solid #dee2e6}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#000;border-color:#dee2e6}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-color:#dee2e6}.light[_ngcontent-%COMP%]   .badge-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.light[_ngcontent-%COMP%]   .badge-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.light[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#000;border-color:#dee2e6}.dark[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{background-color:#222b45;color:#fff}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{background-color:transparent}.dark[_ngcontent-%COMP%]   .table-bordered[_ngcontent-%COMP%]{border:1px solid #3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#2e3a59;color:#fff;border-color:#3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#222b45;color:#fff;border-color:#3b426b}.dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#192038;color:#fff;border-color:#111426}.dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#8590a8}"]}),e})(),data:{breadcrumb:"Danh S\xe1ch"}}]}];let G=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(V),c.Bz]}),e})();var j=l(5053);let R=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[Z],imports:[i.u5,i.UX,f.O,a.EoG,a._WB,a.obu,a.zyh,a.BW0,a.T2N,a.COg,a.PYG,a.MfT,a.nKr,a.SDF,a.oGl,a.AE1,G,a.rgH,j.U]}),e})()}}]);