"use strict";(self.webpackChunkASM=self.webpackChunkASM||[]).push([[661],{6661:(I,m,a)=>{a.r(m),a.d(m,{rolesModule:()=>J});var c=a(9015),s=a(2823),p=a(2617),b=a(4004),C=a(1005),t=a(4650),f=a(529);let v=(()=>{class n{constructor(e){this.http=e}load(e,o){const r=(e-1)%7*o;return this.http.get("assets/data/news.json").pipe((0,b.U)(l=>l.splice(r,o)),(0,C.g)(1500))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var g=a(923);let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ngx-components"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[g.lC],encapsulation:2}),n})();var E=a(5226),T=a.n(E),u=a(4641),Z=a(8135);let P=(()=>{class n extends Z.s{constructor(e){super(e),this._http=e}getAllRoles(e,o=""){const r={page:e.toString(),search:o};return this.get(u.C+u.Q.roles,r)}addRoles(e){return this.post(u.C+u.Q.roles,e)}updateRoles(e,o){return this.patch(`${u.C+u.Q.roles}/${e}`,o)}deleteRoles(e){return this.delete(`${u.C+u.Q.roles}/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var O=a(5515),h=a(6895),y=a(5547);const R=["formElement"];function A(n,i){1&n&&(t.TgZ(0,"span",42),t._uU(1,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),t.qZA())}function S(n,i){1&n&&(t.TgZ(0,"span",43),t._uU(1,"\u0110\xe3 ng\u1eebng ho\u1ea1t \u0111\u1ed9ng"),t.qZA())}function x(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",33),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t.YNc(6,A,2,0,"span",35),t.YNc(7,S,2,0,"span",36),t.qZA(),t.TgZ(8,"td",34)(9,"div",37)(10,"button",38),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.editRole(l.id))}),t._UZ(11,"i",39),t.qZA(),t.TgZ(12,"button",40),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteRole(l.id))}),t._UZ(13,"i",41),t.qZA()()()()}if(2&n){const e=i.$implicit,o=i.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",0===e.status),t.xp6(1),t.Q6J("ngIf",1===e.status)}}function k(n,i){1&n&&(t.TgZ(0,"small"),t._uU(1," Vui l\xf2ng nh\u1eadp t\xean vai tr\xf2. "),t.qZA())}function F(n,i){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,k,2,0,"small",44),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.form.get("name").hasError("required"))}}const N=[{path:"",component:M,children:[{path:"list",component:(()=>{class n{constructor(e,o,r,l,d,Q){this.toastrService=e,this.RoleService=o,this.themeService=r,this.spinner=l,this.router=d,this.route=Q,this.newRole={name:"",status:""},this.isAddingNewRole=!0,this.isEditing=!1,this.apiUrl=u.C+u.Q.roles,this.currentPage=1,this.searchQuery="",this.Roles=[],this.themes=[{value:"default",name:"Light"},{value:"dark",name:"Dark"}],this.currentTheme="default",this.themeService.onThemeChange().subscribe(q=>{this.currentTheme=q.name})}ngOnInit(){this.route.queryParams.subscribe(e=>{this.loadRoles(e.page||1)}),this.form=new c.cw({name:new c.NI("",c.kI.required),status:new c.NI("")})}loadRoles(e){this.RoleService.getAllRoles(e,this.searchQuery).subscribe(o=>{this.spinner.hide(),this.Roles=o.roles,this.currentPage=o.currentPage,this.totalPages=o.totalPages;const r={page:e};this.searchQuery&&""!==this.searchQuery.trim()&&(r.search=this.searchQuery),this.router.navigate([],{queryParams:r,replaceUrl:!0})})}onSearch(){this.loadRoles(this.currentPage)}addRoles(){if(!this.form.valid)return void this.toastrService.danger("Vui l\xf2ng nh\u1eadp \u0111\u1ee7 d\u1eef li\u1ec7u v\xe0 ki\u1ec3m tra l\u1ea1i c\xe1c tr\u01b0\u1eddng!","Error");let e;const o=this.form.get("name").value;let r=this.form.get("status").value;r||(r=0),e={name:o,status:r},!0!==this.isEditing||this.isAddingNewRole?this.RoleService.addRoles(e).subscribe(()=>{this.toastrService.success("Th\xeam m\u1edbi th\xe0nh c\xf4ng!","Success"),this.spinner.hide(),this.loadRoles(1)},l=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi th\xeam !","Error"),console.error("Error adding Roles:",l),this.spinner.hide()}):this.RoleService.updateRoles(this.newRole.id,e).subscribe(()=>{this.toastrService.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!","Success"),this.isEditing=!1,this.spinner.hide(),this.loadRoles(this.currentPage)},d=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi c\u1eadp nh\u1eadt!","Error"),console.error("Error updating Roles:",d),this.spinner.hide()}),this.form.reset()}editRole(e){if(this.isEditing)return;const o=this.Roles.findIndex(r=>r.id===e);-1!==o&&(this.newRole=Object.assign({},this.Roles[o]),this.form.patchValue({name:this.newRole.name,status:this.newRole.status}),this.isAddingNewRole=!1,this.isEditing=!0,this.toastrService.info("S\u1eb5n s\xe0ng c\u1eadp nh\u1eadt!","Th\xf4ng tin")),this.scrollFormIntoView()}deleteRole(e){T().fire({title:"X\xe1c nh\u1eadn x\xf3a",text:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a vai tr\xf2 n\xe0y?",icon:"warning",showCancelButton:!0,confirmButtonText:"\u0110\u1ed3ng \xfd",cancelButtonText:"H\u1ee7y b\u1ecf"}).then(o=>{o.isConfirmed&&this.RoleService.deleteRoles(e).subscribe(()=>{const r=this.Roles.findIndex(l=>l.id===e);-1!==r&&(this.Roles.splice(r,1),this.toastrService.success("X\xf3a th\xe0nh c\xf4ng!","Success"))},r=>{this.toastrService.danger("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi x\xf3a","Error"),console.error("Error deleting Roles:",r)})})}Reset(){this.isEditing=!1,this.isAddingNewRole=!1,this.form.reset(),this.toastrService.success("D\u1eef li\u1ec7u tr\xean form \u0111\xe3 \u0111\u01b0\u1ee3c reset!","Th\xe0nh c\xf4ng")}scrollFormIntoView(){this.formElement&&this.formElement.nativeElement.scrollIntoView({behavior:"smooth",block:"start"})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.quB),t.Y36(P),t.Y36(s.WMF),t.Y36(O.V),t.Y36(g.F0),t.Y36(g.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-roles"]],viewQuery:function(e,o){if(1&e&&t.Gf(R,5),2&e){let r;t.iGM(r=t.CRH())&&(o.formElement=r.first)}},decls:59,vars:11,consts:[[3,"ngClass"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"d-flex",3,"ngSubmit"],["type","search","placeholder","T\xecm ki\u1ebfm","name","searchQuery","aria-label","Search",1,"form-control","me-2",3,"ngModel","ngModelChange"],["type","submit","nbButton","","status","primary"],[1,"fa-solid","fa-magnifying-glass"],[1,"container"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[3,"apiUrl","current_page","last_page","dataList"],[1,"my-lg-2",3,"ngClass"],[1,"card-title"],[3,"formGroup","ngSubmit"],["rolesForm","ngForm","formElement",""],[1,"row"],[1,"col-md-6"],[1,"form-group","my-3"],["for","RoleName",1,"my-1"],[1,"spot"],["type","text","id","RoleName","formControlName","name",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],["for","categoriesName",1,"my-1"],["id","status","formControlName","status",1,"form-control"],["value",""],["value","0"],["value","1"],[1,"text-danger"],["nbButton","","type","submit","status","success","nbTooltip","L\u01b0u d\u1eef li\u1ec7u",1,"float-end",3,"disabled"],[1,"fa-solid","fa-check"],["nbButton","","status","warning","type","button","nbTooltip","Reset d\u1eef li\u1ec7u",1,"float-end","mx-2",3,"click"],[1,"fa-solid","fa-rotate-left"],[1,"align-middle"],[1,"align-middle","text-center"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"btn-group","d-flex","justify-content-center"],["nbButton","","status","primary","type","button","nbTooltip","S\u1eeda d\u1eef li\u1ec7u",1,"btn-sm","mx-1","btn-equal",3,"click"],[1,"fa-solid","fa-pen-to-square"],["nbButton","","status","danger","type","button","nbTooltip","X\xf3a d\u1eef li\u1ec7u",1,"btn-sm","mx-1","btn-equal",3,"click"],[1,"fa-solid","fa-trash"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header",1)(2,"h5",2),t._uU(3,"Danh s\xe1ch vai tr\xf2"),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return o.onSearch()}),t.TgZ(5,"input",4),t.NdJ("ngModelChange",function(l){return o.searchQuery=l}),t.qZA(),t.TgZ(6,"button",5),t._UZ(7,"i",6),t.qZA()()(),t.TgZ(8,"nb-card-body")(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),t._uU(15,"#"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"T\xean vai tr\xf2"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Thao t\xe1c"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,x,14,4,"tr",10),t.qZA()(),t.TgZ(24,"ngx-paginator",11),t.NdJ("dataList",function(l){return o.loadRoles(l)}),t.qZA()()()()(),t.TgZ(25,"nb-card",12)(26,"nb-card-header")(27,"h5",13),t._uU(28,"Th\xeam / C\u1eadp nh\u1eadt vai tr\xf2"),t.qZA()(),t.TgZ(29,"nb-card-body")(30,"form",14,15),t.NdJ("ngSubmit",function(){return o.addRoles()}),t.TgZ(33,"div",16)(34,"div",17)(35,"div",18)(36,"label",19),t._uU(37,"T\xean vai tr\xf2"),t.TgZ(38,"span",20),t._uU(39,"*"),t.qZA(),t._uU(40,":"),t.qZA(),t.TgZ(41,"input",21),t.NdJ("ngModelChange",function(l){return o.newRole.name=l}),t.qZA(),t.YNc(42,F,2,1,"div",22),t.qZA()(),t.TgZ(43,"div",17)(44,"div",18)(45,"label",23),t._uU(46,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(47,"select",24)(48,"option",25),t._uU(49,"-- Ch\u1ecdn tr\u1ea1ng th\xe1i --"),t.qZA(),t.TgZ(50,"option",26),t._uU(51,"\u0110ang ho\u1ea1t \u0111\u1ed9ng"),t.qZA(),t.TgZ(52,"option",27),t._uU(53,"Ng\u1eebng ho\u1ea1t \u0111\u1ed9ng"),t.qZA()(),t._UZ(54,"div",28),t.qZA()()(),t.TgZ(55,"button",29),t._UZ(56,"i",30),t.qZA(),t.TgZ(57,"button",31),t.NdJ("click",function(){return o.Reset()}),t._UZ(58,"i",32),t.qZA()()()()),2&e&&(t.Q6J("ngClass",o.currentTheme),t.xp6(5),t.Q6J("ngModel",o.searchQuery),t.xp6(18),t.Q6J("ngForOf",o.Roles),t.xp6(1),t.Q6J("apiUrl",o.apiUrl)("current_page",o.currentPage)("last_page",o.totalPages),t.xp6(1),t.Q6J("ngClass",o.currentTheme),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("ngModel",o.newRole.name),t.xp6(1),t.Q6J("ngIf",o.form.get("name").invalid&&o.form.get("name").touched),t.xp6(13),t.Q6J("disabled",!o.form.valid))},dependencies:[c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.On,c.F,c.sg,c.u,h.mk,h.sg,h.O5,s.Asz,s.yKW,s.ndF,s.DPz,s.jNv,y.J],styles:[".spot[_ngcontent-%COMP%]{color:red}.badge-success[_ngcontent-%COMP%]{display:inline-block;padding:.5em .75em;font-size:.875em;font-weight:700;color:#fff;background-color:#28a745;border-radius:.2rem}.badge-danger[_ngcontent-%COMP%]{display:inline-block;padding:.5em .75em;font-size:.875em;font-weight:700;color:#fff;background-color:#dc3545;border-radius:.2rem}.light[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{background-color:#fff;color:#000}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{background-color:transparent}.light[_ngcontent-%COMP%]   .table-bordered[_ngcontent-%COMP%]{border:1px solid #dee2e6}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#000;border-color:#dee2e6}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.light[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-color:#dee2e6}.light[_ngcontent-%COMP%]   .badge-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.light[_ngcontent-%COMP%]   .badge-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.light[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#000;border-color:#dee2e6}.dark[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{background-color:#222b45;color:#fff}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{background-color:transparent}.dark[_ngcontent-%COMP%]   .table-bordered[_ngcontent-%COMP%]{border:1px solid #3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#2e3a59;color:#fff;border-color:#3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#3b426b}.dark[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#222b45;color:#fff;border-color:#3b426b}.dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#192038;color:#fff;border-color:#111426}.dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#8590a8}"]}),n})(),data:{breadcrumb:"Danh S\xe1ch"}}]}];let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(N),g.Bz]}),n})();var w=a(5053);let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[v],imports:[c.u5,c.UX,p.O,s.EoG,s._WB,s.obu,s.zyh,s.BW0,s.T2N,s.COg,s.PYG,s.MfT,s.nKr,s.SDF,s.oGl,s.AE1,U,s.rgH,w.U]}),n})()}}]);